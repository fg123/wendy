import bus

let TestHandler => (a) {
	Bus("Output").post("A: " + a);
};

let TestHandlerB => (a) {
	Bus("Output").post("B: " + a);
};

let TestHandlerD => (a) {
	Bus("Output").post("C: " + a);
};

let TestHandlerC => (a) {
	Bus("Output").post("D: " + a);
};

Bus("Output").register(#:(x) { x; });

Bus("Input").register(TestHandler);
Bus("Input").register(TestHandlerB);
Bus("Input").register(TestHandlerC);
Bus("Input").register(TestHandlerD);

for i in 1->100 Bus("Input").post(i);

for true { }
