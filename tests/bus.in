import bus

let TestHandler => (a) {
	Bus("Output").post(a + 10);
};

let TestHandlerB => (a) {
	Bus("Output").post(a + 20);
};

let TestHandlerD => (a) {
	Bus("Output").post(a + 30);
};

let TestHandlerC => (a) {
	Bus("Output").post(a + 40);
};

Bus("Output").register(#:(x) { x; });

Bus("Input").register(TestHandler);
Bus("Input").register(TestHandlerB);
Bus("Input").register(TestHandlerC);
Bus("Input").register(TestHandlerD);

for i in 1->100 Bus("Input").post(i);

for true { }
